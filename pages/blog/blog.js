"use strict";function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0,e=function(){};return{s:e,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return r=t.done,t},e:function(t){c=!0,o=t},f:function(){try{r||null==n.return||n.return()}finally{if(c)throw o}}}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var a,o,n=document.querySelector(".form_js"),t=document.querySelector(".reset_js"),c=document.querySelector(".result_js"),u=document.querySelector(".number_js"),e=document.querySelector(".formSubmit_js"),d=document.querySelector(".buttonNext_js"),p=document.querySelector(".buttonPrev_js"),f=[];a=new XMLHttpRequest,o=document.querySelector(".tagBox_js"),a.open("GET","".concat(SERVER_URL,"/api/tags")),o.innerHTML=preloaderCreaterblog(),a.send(),a.onload=function(){var t=JSON.parse(a.response);if(t.success){o.innerHTML="";var e=i(t.data);try{for(e.s();!(n=e.n()).done;){var n=n.value;o.innerHTML+='\n    <label class="tags-box">\n        <input class="tags-box__tag hidden hidden_focus" type="checkbox" checked="checked" name="tags" value="'.concat((n=n).id,'">\n        <span class="tags-box__checkbox" style = "border-color: ').concat(n.color,'">\n        <svg class="tags-box__svg" width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <path d="M2 6.75L5.91301 12.77C6.20128 13.2135 6.85836 13.1893 7.11327 12.7259L13.425 1.25" stroke="').concat(n.color,'" stroke-width="2.5" stroke-linecap="round"/>\n        </svg>\n        </span>\n    </label>')}}catch(t){e.e(t)}finally{e.f()}}else console.error(t._message)},a.onerror=function(){console.error("Error. Try again.")};var m=function(){var t=new URL(window.location).searchParams,e={};t.has("tags")&&(e.tags=t.getAll("tags"));t.has("views")&&(e.views=t.get("views"));t.has("commentsCount")&&(e.commentsCount=t.getAll("commentsCount"));t.has("limit")&&(e.limit=t.get("limit"));t.has("sorted")&&(e.sorted=t.get("sorted"));t.has("title")&&(e.title=t.get("title"));t.has("page")&&(e.page=t.get("page"));return e}();function g(t){for(var e=new URL("http://asd.asd"),n=0,a=Object.keys(t);n<a.length;n++){var o=a[n];if("object"===s(t[o])){var r=i(t[o]);try{for(r.s();!(c=r.n()).done;){var c=c.value;e.searchParams.append(o,c)}}catch(t){r.e(t)}finally{r.f()}}else e.searchParams.append(o,t[o]);history.replaceState({},document.title,e.search)}}m.page=0,setValueToForm(n,m),window.onload=function(){e.click()},n.addEventListener("submit",function r(t){t.preventDefault();var e=m.page,t=m.limit;(m=getFormData(n)).page=e,m.limit!=t&&(m.page=0),g(m),c.innerHTML=preloaderCreaterblog(),function(t,e){var n=new URL("http://asd.asd");t.tags&&n.searchParams.set("tags",JSON.stringify(t.tags)),n.searchParams.set("v",VERSION_API);var a={};t.title&&(a.title=t.title),t.views&&(a.views=function(t){t=t.split("-");return{$between:[+t[0],+t[1]]}}(t.views)),0!=t.commentsCount.length&&(a.commentsCount=function(t){var e=t[0].split("-"),t=t[t.length-1].split("-"),e=+e[0],t=+t[t.length-1];return{$between:[e,t]}}(t.commentsCount)),t.sorted&&n.searchParams.set("sort",JSON.stringify([t.sorted,"DESC"])),t.limit&&n.searchParams.set("limit",+t.limit),t.page&&n.searchParams.set("offset",+t.page*+t.limit),n.searchParams.set("filter",JSON.stringify(a));var o=new XMLHttpRequest;o.open("GET","".concat(SERVER_URL,"/api/posts?").concat(n.searchParams)),o.send(),o.onload=function(){e(o)},onerror=function(){console.error(response._message)}}(m,function(t){var o=JSON.parse(t.response);if(o.success){c.innerHTML="";var e=i(o.data);try{for(e.s();!(n=e.n()).done;){var n=n.value;c.innerHTML+=(n=n,'<div class="card__box">\n    <div class="card__inner-img">\n<picture class="card__img">\n<source srcset="'.concat(SERVER_URL).concat(n.photo.mobilePhotoUrl,", ").concat(SERVER_URL).concat(n.photo.mobile2xPhotoUrl,' 2x" media="(max-width: 640px)">\n<source srcset="').concat(SERVER_URL).concat(n.photo.tabletPhotoUrl,", ").concat(SERVER_URL).concat(n.photo.tablet2xPhotoUrl,' 2x" media="(max-width: 1023px)">\n<source srcset="').concat(SERVER_URL).concat(n.photo.desktopPhotoUrl,", ").concat(SERVER_URL).concat(n.photo.desktop2xPhotoUrl,' 2x">\n<img src="').concat(SERVER_URL).concat(n.photo.desktopPhotoUrl,'" width="320" height="236" alt="').concat(n.title,'"/>\n</picture>\n</div>\n    <div class="card__inner-box">\n        <ul class="card__taglist Tag_js">\n            ').concat(function(t){var t=t.tags,e="",n=i(t);try{for(n.s();!(a=n.n()).done;){var a=a.value;e+=function(t){return'\n    <li class="card__tags">\n        <span class="card__tag" style="background-color: '.concat(t.color,';" title="').concat(t.name,'"></span>\n    </li>')}(a)}}catch(t){n.e(t)}finally{n.f()}return e}(n),'\n        </ul>\n        <ul class="card__inner-info">\n            <li class="card__infoitem">\n                <span class="card__infoText">').concat(function(t){var e=new Date(t),n=function(t){return 9<t?t:"0"+t}(e.getDate()),t=function(t){return 9<(t+=1)?t:"0"+t}(e.getMonth()),e=e.getFullYear();return"".concat(n,".").concat(t,".").concat(e)}(n.date),'</span>\n            </li>\n            <li class="card__infoitem">\n                <span class="card__infoText">').concat(n.views,' views</span>\n            </li>\n            <li class="card__infoitem">\n                <span class="card__infoText">').concat(n.commentsCount,' comments</span>\n            </li>\n        </ul>\n        <h3 class="card__title">').concat(n.title,'</h3>\n        <p class="card__text">').concat(n.text,'</p>\n        <a class="card__link" href="#">Go to this post</a>\n    </div>\n</div>'))}}catch(t){e.e(t)}finally{e.f()}!function(t,e){var n=Math.ceil(+o.count/e.limit);t.innerHTML="";for(var a=0;a<n;a++)e.page===a?t.innerHTML+='<a href="?page='.concat(a,'" class="pagination__num pagination__num_active link_js">').concat(a+1,"</a>"):t.innerHTML+='<a href="?page='.concat(a,'" class="pagination__num link_js">').concat(a+1,"</a>"),p.classList.remove("pagination__button_disabled"),d.classList.remove("pagination__button_disabled")}(u,m),f=u.querySelectorAll(".link_js");for(var a=0;a<f.length;a++)!function(e){link=f[e],link.addEventListener("click",function(t){t.preventDefault(),m.page=e,g(m),r(t)})}(a)}else console.error("Server error")})}),t.addEventListener("click",function(){n.reset(),params={},g(params)}),p.addEventListener("click",function(){m.page<=0?p.classList.add("pagination__button_disabled"):(console.log(m.page),--m.page,e.click(),p.classList.remove("pagination__button_disabled"))}),d.addEventListener("click",function(){m.page>=f.length-1?d.classList.add("pagination__button_disabled"):(m.page+=1,e.click())});